<!doctype html>
<html x-cloak x-data="darkMode" :class="[
        htmlclass, 
            (
                localStorage.theme === 'dark' 
                || (!('theme' in localStorage) 
                && window.matchMedia('(prefers-color-scheme: dark)').matches)
            ) ? 'dark' : 'light'
        ]" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <base href="/" />
    <title>TYPO3 Command Line</title>
    <meta name="generator" content="jekyll serve github" />
    <meta name="keywords" content="" />
    <meta name="description" content="Command Line for TYPO3 6,7,8" />

    <link rel="apple-touch-icon" sizes="192x192" href="logo.png" />
    <link rel="apple-touch-icon" sizes="512x512" href="logo.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="logo.png" />
    <link rel="apple-touch-icon" sizes="16x16" href="favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="30x30" href="favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="logo.png" />
    <link rel="icon" href="favicon.ico" type="image/x-ico; charset=binary" />

    <link rel="stylesheet" href="assets/main.css" />
</head>

<body>
    <div class="continer">
        <header>
            

<nav class="bg-gray-800" x-data="{
    showMenu: false,
    sendMail() {
        let link = `mailto:pengmaradi@gmail.com
        ?subject=mail from pengmaradi.github.io
        `
        window.location.href = link;
        return false;
    }
}">
    <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
        <div class="relative flex h-16 items-center justify-between">
            <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
                <!-- Mobile menu button-->
                <button type="button"
                    @click="showMenu = !showMenu;"
                    class="relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"
                    aria-controls="mobile-menu" aria-expanded="false">
                    <span class="absolute -inset-0.5"></span>
                    <span class="sr-only">Open main menu</span>

                    <svg class="block h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                        aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                    </svg>

                    <svg class="hidden h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                        aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start">
                <div class="flex flex-shrink-0 items-center">
                    <a href="/">
                        <img class="h-8 w-auto" src="logo.png" alt="pengmaradi art" />
                    </a>
                </div>
                <div class="hidden sm:ml-6 sm:block">
                    <div class="flex space-x-4">
                        
                        <a href="/" class="rounded-md px-3 py-2 text-sm font-medium text-white">
                            Home
                        </a>
                        
                        <a href="/news.html" class="rounded-md px-3 py-2 text-sm font-medium text-white">
                            Blog
                        </a>
                        
                        <a href="/profile.html" class="rounded-md px-3 py-2 text-sm font-medium text-white">
                            About
                        </a>
                        
                    </div>
                </div>
            </div>
            <div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0">
                <div class="relative ml-3">
                    <div>
                        <button type="button"
                            @click="sendMail();"
                            class="cursor-pointer relative flex rounded-full bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800"
                            id="user-menu-button" aria-expanded="false" aria-haspopup="true">
                            <span class="absolute -inset-1.5"></span>
                            <span class="sr-only">contact</span>
                            <img class="h-8 w-8 rounded-full"
                                src="https://avatars.githubusercontent.com/u/1831210?v=4"
                                alt="pengmaradi">
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="sm:hidden" id="mobile-menu" x-show="showMenu">
        <div class="space-y-1 px-2 pb-3 pt-2">
            
            <a href="/" class="block rounded-md px-3 py-2 text-base font-medium text-white" >
                Home
            </a>
            
            <a href="/news.html" class="block rounded-md px-3 py-2 text-base font-medium text-white" >
                Blog
            </a>
            
            <a href="/profile.html" class="block rounded-md px-3 py-2 text-base font-medium text-white" >
                About
            </a>
            
        </div>
    </div>
</nav>

<button class="test absolute right-0 top-12" @click="toggleDarkmode()">Toggle Dark Mode</button>

        </header>
        <main class="mt-10 p-2 min-h-screen">
            <h1 id="typo3-command-line-change-tx_templavoila_flex-to-custom_ext">TYPO3 Command Line change tx_templavoila_flex to custom_ext</h1>

<h2 id="accordion-command-controllerphp">Accordion Command Controller.php</h2>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">namespace</span> <span class="nn">Vendor\BiozentrumAccordion\Command</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">\TYPO3\CMS\Core\Utility\GeneralUtility</span><span class="p">;</span>

<span class="cd">/**
 * class AccordionCommandController
 *
 */</span>
<span class="kd">class</span> <span class="nc">AccordionCommandController</span> <span class="kd">extends</span> <span class="nc">\TYPO3\CMS\Extbase\Mvc\Controller\CommandController</span>
<span class="p">{</span>
	<span class="cd">/**
	 * php typo3/cli_dispatch.phpsh extbase biozentrum_accordion:accordion:accordion --dry-run=1
	 * Migrate default content Templavoilà objects to default textpic elements
	 *
	 * @param integer $templavoilaObjectId
	 * @param boolean $dryRun Dry run
	 * @return void
	 */</span>
	<span class="k">public</span> <span class="k">function</span> <span class="n">accordionCommand</span><span class="p">(</span><span class="nv">$templavoilaObjectId</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">$dryRun</span> <span class="o">=</span> <span class="kc">true</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="nv">$where</span> <span class="o">=</span> <span class="s1">' '</span><span class="p">;</span>
		<span class="c1">//$where .= 'AND uid = 4587';</span>

		<span class="nv">$res</span> <span class="o">=</span> <span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">'TYPO3_DB'</span><span class="p">]</span><span class="o">-&gt;</span><span class="nf">exec_SELECTgetRows</span><span class="p">(</span>
			<span class="s1">'uid,pid, tstamp,crdate,ExtractValue(tx_templavoila_flex, \'T3FlexForms/data/sheet/language/field[@index="field_inhalt"]/value[@index="vDEF"]\') as bodytext, ExtractValue(tx_templavoila_flex, \'T3FlexForms/data/sheet/language/field[@index="field_title"]/value\') as subheader, sys_language_uid,l18n_parent,\'biozentrumaccordion_accordion\' as CType'</span><span class="p">,</span>
			<span class="s1">'tt_content'</span><span class="p">,</span>
			<span class="s1">'tx_templavoila_ds = '</span> <span class="mf">.</span> <span class="nb">intval</span><span class="p">(</span><span class="nv">$templavoilaObjectId</span><span class="p">)</span> <span class="mf">.</span> <span class="s1">' AND tx_templavoila_to = 11'</span><span class="mf">.</span> <span class="nv">$where</span><span class="p">,</span>
			<span class="s1">''</span><span class="p">,</span>
			<span class="s1">'l18n_parent ASC'</span>
		<span class="p">);</span>



		<span class="k">foreach</span><span class="p">(</span><span class="nv">$res</span> <span class="k">as</span> <span class="nv">$index</span> <span class="o">=&gt;</span> <span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
			<span class="nv">$uid</span> <span class="o">=</span> <span class="nv">$result</span><span class="p">[</span><span class="s1">'uid'</span><span class="p">];</span>
			<span class="nv">$result</span><span class="p">[</span><span class="s1">'bodytext'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">htmlspecialchars_decode</span><span class="p">(</span><span class="nv">$result</span><span class="p">[</span><span class="s1">'bodytext'</span><span class="p">]);</span>
			<span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">updateContent</span><span class="p">(</span><span class="nv">$uid</span><span class="p">,</span> <span class="nv">$result</span><span class="p">,</span> <span class="nv">$dryRun</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="cd">/**
	 *
	 * @param integer $uid
	 * @param array $result
	 * @param boolean $dryRun
	 */</span>
	<span class="k">private</span> <span class="k">function</span> <span class="n">updateContent</span><span class="p">(</span><span class="nv">$uid</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$result</span><span class="p">,</span> <span class="nv">$dryRun</span><span class="p">)</span> <span class="p">{</span>
		<span class="nv">$updateWhere</span> <span class="o">=</span> <span class="s1">'uid = '</span> <span class="mf">.</span> <span class="nv">$uid</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$dryRun</span><span class="p">)</span> <span class="p">{</span>
			<span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">'TYPO3_DB'</span><span class="p">]</span><span class="o">-&gt;</span><span class="nf">exec_UPDATEquery</span><span class="p">(</span>
				<span class="s1">'tt_content'</span><span class="p">,</span> <span class="nv">$updateWhere</span><span class="p">,</span> <span class="nv">$result</span>
			<span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">echo</span> <span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">'TYPO3_DB'</span><span class="p">]</span><span class="o">-&gt;</span><span class="nf">UPDATEquery</span><span class="p">(</span>
				<span class="s1">'tt_content'</span><span class="p">,</span> <span class="nv">$updateWhere</span><span class="p">,</span> <span class="nv">$result</span>
			<span class="p">),</span><span class="s1">';'</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<h2 id="ext_localconfphp">ext_localconf.php</h2>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">'TYPO3_CONF_VARS'</span><span class="p">][</span><span class="s1">'SC_OPTIONS'</span><span class="p">][</span><span class="s1">'extbase'</span><span class="p">][</span><span class="s1">'commandControllers'</span><span class="p">][]</span> <span class="o">=</span> <span class="s1">'Vendor\\BiozentrumAccordion\\Command\\AccordionCommandController'</span><span class="p">;</span>

</code></pre></div></div>

        </main>
        <footer class="relative bg-gray-900 text-white px-4 sm:px-8 lg:px-16 xl:px-40 2xl:px-64 py-24">
            
<div class="container">
    <i>Layout ist tailwind</i>
    <p>31 August 2024</p>
    <p>© pengmaradi 2024</p>
</div>


        </footer>
    </div>

    <script type="module" src="assets/main.js"></script>
</body>

</html>